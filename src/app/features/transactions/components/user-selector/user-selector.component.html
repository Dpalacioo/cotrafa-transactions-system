<div class="mb-6">
  <h2 class="text-lg font-semibold mb-2 text-gray-900 dark:text-gray-100">
    Seleccionar usuario
  </h2>

  <div class="mb-4">
    <input
      type="text"
      placeholder="Buscar usuario por nombre, email o ciudad."
      class="w-full md:w-1/2 px-4 py-2 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"
      (input)="onSearch($event)"
    />
  </div>

  <div
    *ngIf="filteredUsers.length === 0"
    class="py-8 text-center text-gray-900 dark:text-gray-100"
  >
    No hay resultados para la b√∫squeda actual
  </div>

  <div
    *ngIf="paginatedUsers.length > 0"
    class="grid grid-cols-1 md:grid-cols-3 gap-4"
  >
    <div
      *ngFor="let user of paginatedUsers; trackBy: trackByUserId"
      (click)="selectUser(user.id)"
      class="flex items-center p-4 cursor-pointer rounded-lg shadow bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow hover:bg-gray-50 dark:hover:bg-gray-800"
      [class.border-primary]="selectedUserId === user.id"
      [class.ring-2]="selectedUserId === user.id"
      [class.ring-primary]="selectedUserId === user.id"
    >
      <img
        *ngIf="user.picture"
        [src]="user.picture"
        alt="{{ user.name }}"
        class="w-12 h-12 rounded-full mr-4 flex-shrink-0"
      />

      <div class="flex-1 min-w-0">
        <p class="font-medium truncate text-gray-900 dark:text-gray-100">
          {{ user.name }}
        </p>

        <p class="text-sm truncate text-gray-600 dark:text-gray-400">
          {{ user.email }}
        </p>

        <p class="text-sm truncate text-gray-600 dark:text-gray-400">
          {{ user.city }}, {{ user.country }} | {{ user.phone }}
        </p>
      </div>
    </div>
  </div>

  <div
    *ngIf="totalPages > 1 && filteredUsers.length > 0"
    class="flex flex-col md:flex-row md:items-center md:justify-between mt-4"
  >
    <div class="mb-2 md:mb-0 text-gray-700 dark:text-gray-300">
      Showing
      {{ (currentPage - 1) * pageSize + 1 }}
      to
      {{ (currentPage - 1) * pageSize + paginatedUsers.length }}
      of {{ users.length }} results
    </div>

    <nav class="inline-flex -space-x-px" aria-label="Pagination">
      <button
        (click)="goToPage(currentPage - 1)"
        [disabled]="currentPage === 1"
        class="px-3 py-1 rounded-l-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50"
      >
        Previous
      </button>

      <button
        *ngFor="let page of pages"
        (click)="goToPage(page)"
        class="px-3 py-1 border transition"
        [ngClass]="{
          'bg-primary text-gray-900 dark:text-gray-100 border-gray-400 dark:border-gray-500':
            currentPage === page,
          'bg-gray-50 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700':
            currentPage !== page
        }"
      >
        {{ page }}
      </button>

      <button
        (click)="goToPage(currentPage + 1)"
        [disabled]="currentPage === totalPages"
        class="px-3 py-1 rounded-r-lg border bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50"
      >
        Next
      </button>
    </nav>
  </div>
</div>
