<section class="p-4 max-w-4xl mx-auto space-y-6 bg-bgLight dark:bg-bgDark">
  <ng-container *ngIf="usersStore.loading(); else usersContent">
    <p class="text-gray-600 dark:text-gray-400">Cargando usuarios...</p>
  </ng-container>

  <ng-template #usersContent>
    <div
      class="rounded-lg shadow p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700"
    >
      <app-user-selector
        [users]="usersStore.users()"
        (userSelected)="onUserSelected($event)"
      ></app-user-selector>
    </div>

    <div
      *ngIf="selectedUserId"
      class="rounded-lg shadow p-4 mt-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700"
    >
      <app-transaction-form
        (submitTransaction)="onTransactionSubmit($event)"
      ></app-transaction-form>
    </div>
  </ng-template>

  <app-transaction-result
    *ngIf="lastTransactionCus"
    [encryptedCus]="lastTransactionCus.encrypted"
    [originalCus]="lastTransactionCus.original"
  ></app-transaction-result>

  <div
    class="rounded-lg shadow p-4 bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700"
  >
    <app-transactions-history></app-transactions-history>
  </div>

  <p *ngIf="usersStore.error()" class="mt-2 text-red-600 dark:text-red-400">
    {{ usersStore.error() }}
  </p>
</section>
